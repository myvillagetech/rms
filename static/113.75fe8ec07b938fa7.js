"use strict";(self.webpackChunkrequest_management_app=self.webpackChunkrequest_management_app||[]).push([[113],{6113:(rt,f,a)=>{a.r(f),a.d(f,{RequestListModule:()=>ut});var p=a(6895),d=a(3060),c=a(4006),r=a(3626),h=a(9484),t=a(4650),g=a(4067),T=a(996),Z=a(9642),C=a(3238),S=a(4859),_=a(7331),v=a(7392),q=a(9549),y=a(4144),x=a(4385),R=a(4464);function A(e,o){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.Q6J("value",s),t.xp6(1),t.Oqu(null==s?null:s.salesperson)}}function D(e,o){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.Q6J("value",s),t.xp6(1),t.Oqu(null==s?null:s.salesperson)}}function L(e,o){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.Q6J("value",s),t.xp6(1),t.Oqu(null==s?null:s.status)}}function b(e,o){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.Q6J("value",s),t.xp6(1),t.Oqu(null==s?null:s.status)}}function N(e,o){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.Q6J("value",s),t.xp6(1),t.Oqu(null==s?null:s.status)}}function F(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"mat-chip",36),t.NdJ("removed",function(){const i=t.CHM(s).index,u=t.oxw();return t.KtG(u.removeFilers("salesPersons",i))}),t._uU(1),t.TgZ(2,"mat-icon",37),t._uU(3,"cancel"),t.qZA()()}if(2&e){const s=o.$implicit;t.xp6(1),t.hij(" ",s.salesperson," ")}}function U(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"mat-chip",36),t.NdJ("removed",function(){const i=t.CHM(s).index,u=t.oxw();return t.KtG(u.removeFilers("rfqStatus",i))}),t._uU(1),t.TgZ(2,"mat-icon",37),t._uU(3,"cancel"),t.qZA()()}if(2&e){const s=o.$implicit;t.xp6(1),t.hij(" ",s.status," ")}}function P(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"mat-chip",36),t.NdJ("removed",function(){const i=t.CHM(s).index,u=t.oxw();return t.KtG(u.removeFilers("quoteSubmittedTo",i))}),t._uU(1),t.TgZ(2,"mat-icon",37),t._uU(3,"cancel"),t.qZA()()}if(2&e){const s=o.$implicit;t.xp6(1),t.hij(" ",s.salesperson," ")}}function Q(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"mat-chip",36),t.NdJ("removed",function(){const i=t.CHM(s).index,u=t.oxw();return t.KtG(u.removeFilers("quoteStatus",i))}),t._uU(1),t.TgZ(2,"mat-icon",37),t._uU(3,"cancel"),t.qZA()()}if(2&e){const s=o.$implicit;t.xp6(1),t.hij(" ",s.status," ")}}function Y(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"mat-chip",36),t.NdJ("removed",function(){const i=t.CHM(s).index,u=t.oxw();return t.KtG(u.removeFilers("paymentStatus",i))}),t._uU(1),t.TgZ(2,"mat-icon",37),t._uU(3,"cancel"),t.qZA()()}if(2&e){const s=o.$implicit;t.xp6(1),t.hij(" ",s.status," ")}}function J(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1,"Title"),t.qZA())}function O(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(null==s?null:s.title)}}function I(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1,"Invoice Amount"),t.qZA())}function B(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(null==s?null:s.invoiceAmount)}}function M(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1,"Invoice No"),t.qZA())}function $(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(null==s?null:s.invoiceNo)}}function k(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1,"Payment Status"),t.qZA())}function w(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(null==s?null:s.paymentStatusData[0].status)}}function H(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1,"Sales Persons"),t.qZA())}function j(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(null==s||null==s.salesPersonData[0]?null:s.salesPersonData[0].salesperson)}}function E(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1,"Quote Amount"),t.qZA())}function z(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(null==s?null:s.quoteAmount)}}function G(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1,"Quote Status"),t.qZA())}function K(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(null==s||null==s.quoteStatusData[0]?null:s.quoteStatusData[0].status)}}function V(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1,"Quote Sub Date"),t.qZA())}function X(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,null==s?null:s.quoteSubDate)," ")}}function W(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1,"Actions"),t.qZA())}function tt(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"td",40),t.NdJ("click",function(){const i=t.CHM(s).$implicit,u=t.oxw();return t.KtG(u.getRequestDetailsByrequestId(null==i?null:i._id))}),t._uU(1," View request "),t.qZA()}}function et(e,o){1&e&&t._UZ(0,"tr",41)}function st(e,o){1&e&&t._UZ(0,"tr",42)}function ot(e,o){1&e&&(t.ynx(0),t.TgZ(1,"div",43),t._uU(2," request list is empty please create request "),t.qZA(),t.BQk())}const nt=[{path:"",component:(()=>{class e{constructor(s,n,m,i,u){this.requestService=s,this.formBuilder=n,this.router=m,this.alertPopupService=i,this.confirmationDialogService=u,this.requestDetails=[],this.displayedColumns=["title","InvoiceAmount","InvoiceNo","paymentStatus","persons","quoteAmount","quoteStatus","quoteSubDate","actions"],this.dataSource=new r.by(this.requestDetails),this.searchCriteriaPayload={pageNumber:0,pageSize:0,sortField:"",sortOrder:0,groupBy:0,serachTerm:"",rfqStatus:[],salesPersons:[],quoteStatus:[],paymentStatus:[],quoteSubmittedTo:[]},this.toggleSidebar=!1,this.searchPayload={salesPersons:[],quoteSubmittedTo:[],rfqStatus:[],quoteStatus:[],paymentStatus:[]}}ngOnInit(){this.applyFilters(),this.initializeFilterForm(),this.getSalespersonDetails(),this.getAllMasterdataDetails(),this.filterForm.valueChanges.subscribe(s=>{!s||(this.searchPayload={...this.searchPayload,...s})})}getRequestDetailsByrequestId(s){this.requestService.setCurrentRequestId(s),this.router.navigate([h.p.REQUEST_DETAILS],{queryParams:{RId:s}})}initializeFilterForm(){this.filterForm=this.formBuilder.group({salesPersons:[[],c.kI.required],quoteSubmittedTo:[[],c.kI.required],rfqStatus:[[],c.kI.required],quoteStatus:[[],c.kI.required],paymentStatus:[[],c.kI.required]})}searchFilter(s){this.requestService.searchCriteria({...this.searchCriteriaPayload,serachTerm:s.target.value}).subscribe(n=>{this.dataSource=new r.by(n?.requests[0]?.requests),console.log(n?.requests[0]?.requests)})}applyFilters(){const s=this.searchPayload.salesPersons?.map(l=>l._id),n=this.searchPayload.quoteSubmittedTo.map(l=>l._id),m=this.searchPayload.rfqStatus.map(l=>l._id),i=this.searchPayload.quoteStatus.map(l=>l._id),u=this.searchPayload.paymentStatus.map(l=>l._id);this.requestService.searchCriteria({...this.searchCriteriaPayload,salesPersons:s,quoteSubmittedTo:n,rfqStatus:m,quoteStatus:i,paymentStatus:u}).subscribe(l=>{this.alertPopupService.open({message:l.message?l.message:"filters data fetched sucessfully",action:"ok"}),this.dataSource=new r.by(l?.requests[0]?.requests)},l=>{this.alertPopupService.open({message:"Faild to featch filterd data! Please try again ",action:"ok"})})}getSalespersonDetails(){this.requestService.getSalespersonDetails().subscribe(s=>{this.salespersonsData=s?.salespersons})}removeFilers(s,n){this.searchPayload[s].splice(n,1),this.filterForm.controls[s].setValue(this.searchPayload[s]),this.applyFilters()}getAllMasterdataDetails(){this.requestService.getAllMasterdataDetails().subscribe(s=>{this.rfqStatusData=s?.masterData?.RFQStatusData,this.quoteStatusData=s?.masterData?.quoteStatus,this.paymentStatusData=s?.masterData?.paymentRequestStatus,this.quoteSubmittedToData=s?.masterData?.salespersons})}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(g.s),t.Y36(c.qu),t.Y36(d.F0),t.Y36(T.x),t.Y36(Z.O))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-request-list"]],decls:90,vars:17,consts:[[1,"d-flex","justify-content-between"],["appearance","outline"],["matInput","","type","text","placeholder","Search",3,"keyup"],["mat-button","","matPrefix","","mat-icon-button",""],["position","right","styleClass","p-sidebar",3,"visible","baseZIndex","visibleChange"],[1,"container"],[1,"form-container",3,"formGroup"],["appearance","outline",1,"col-sm-12"],["formControlName","salesPersons","multiple",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","quoteSubmittedTo","multiple",""],["formControlName","rfqStatus","multiple",""],["formControlName","quoteStatus","multiple",""],["formControlName","paymentStatus","multiple",""],[1,"btn","btn-danger",3,"click"],[1,"d-flex","flex-warp"],[3,"removed",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-primary","mb-3",3,"click"],["mat-table","",1,"mat-elevation-z8","requestTable",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","InvoiceAmount"],["matColumnDef","InvoiceNo"],["matColumnDef","paymentStatus"],["matColumnDef","persons"],["matColumnDef","quoteAmount"],["matColumnDef","quoteStatus"],["matColumnDef","quoteSubDate"],["matColumnDef","actions"],["mat-cell","","class","view_request",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"value"],[3,"removed"],["matChipRemove",""],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"view_request",3,"click"],["mat-header-row",""],["mat-row",""],[1,"error","d-flex"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"input",2),t.NdJ("keyup",function(i){return n.searchFilter(i)}),t.qZA(),t.TgZ(3,"button",3)(4,"mat-icon"),t._uU(5,"search"),t.qZA()()()(),t.TgZ(6,"div")(7,"p-sidebar",4),t.NdJ("visibleChange",function(i){return n.toggleSidebar=i}),t.TgZ(8,"div",5)(9,"div",6)(10,"h3"),t._uU(11,"Filters:"),t.qZA(),t.TgZ(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"Sales Person"),t.qZA(),t.TgZ(15,"mat-select",8),t.YNc(16,A,2,2,"mat-option",9),t.qZA()(),t.TgZ(17,"mat-form-field",7)(18,"mat-label"),t._uU(19,"Quote Submitted To"),t.qZA(),t.TgZ(20,"mat-select",10),t.YNc(21,D,2,2,"mat-option",9),t.qZA()(),t.TgZ(22,"mat-form-field",7)(23,"mat-label"),t._uU(24,"RFQ Status"),t.qZA(),t.TgZ(25,"mat-select",11),t.YNc(26,L,2,2,"mat-option",9),t.qZA()(),t.TgZ(27,"mat-form-field",7)(28,"mat-label"),t._uU(29,"Quote Status"),t.qZA(),t.TgZ(30,"mat-select",12),t.YNc(31,b,2,2,"mat-option",9),t.qZA()(),t.TgZ(32,"mat-form-field",7)(33,"mat-label"),t._uU(34,"Payment Status"),t.qZA(),t.TgZ(35,"mat-select",13),t.YNc(36,N,2,2,"mat-option",9),t.qZA()(),t.TgZ(37,"button",14),t.NdJ("click",function(){return n.applyFilters()}),t._uU(38,"Search"),t.qZA()()()()(),t.TgZ(39,"div",15)(40,"div")(41,"mat-chip-list"),t.YNc(42,F,4,1,"mat-chip",16),t.qZA()(),t.TgZ(43,"div")(44,"mat-chip-list"),t.YNc(45,U,4,1,"mat-chip",16),t.qZA()(),t.TgZ(46,"div")(47,"mat-chip-list"),t.YNc(48,P,4,1,"mat-chip",16),t.qZA()(),t.TgZ(49,"div")(50,"mat-chip-list"),t.YNc(51,Q,4,1,"mat-chip",16),t.qZA()(),t.TgZ(52,"div")(53,"mat-chip-list"),t.YNc(54,Y,4,1,"mat-chip",16),t.qZA()()(),t.TgZ(55,"div")(56,"div",17)(57,"button",18),t.NdJ("click",function(){return n.toggleSidebar=!0}),t._uU(58," Apply Filters "),t.qZA()(),t.TgZ(59,"table",19),t.ynx(60,20),t.YNc(61,J,2,0,"th",21),t.YNc(62,O,2,1,"td",22),t.BQk(),t.ynx(63,23),t.YNc(64,I,2,0,"th",21),t.YNc(65,B,2,1,"td",22),t.BQk(),t.ynx(66,24),t.YNc(67,M,2,0,"th",21),t.YNc(68,$,2,1,"td",22),t.BQk(),t.ynx(69,25),t.YNc(70,k,2,0,"th",21),t.YNc(71,w,2,1,"td",22),t.BQk(),t.ynx(72,26),t.YNc(73,H,2,0,"th",21),t.YNc(74,j,2,1,"td",22),t.BQk(),t.ynx(75,27),t.YNc(76,E,2,0,"th",21),t.YNc(77,z,2,1,"td",22),t.BQk(),t.ynx(78,28),t.YNc(79,G,2,0,"th",21),t.YNc(80,K,2,1,"td",22),t.BQk(),t.ynx(81,29),t.YNc(82,V,2,0,"th",21),t.YNc(83,X,3,3,"td",22),t.BQk(),t.ynx(84,30),t.YNc(85,W,2,0,"th",21),t.YNc(86,tt,2,0,"td",31),t.BQk(),t.YNc(87,et,1,0,"tr",32),t.YNc(88,st,1,0,"tr",33),t.YNc(89,ot,3,0,"ng-container",34),t.qZA()()),2&s&&(t.xp6(7),t.Q6J("visible",n.toggleSidebar)("baseZIndex",100),t.xp6(2),t.Q6J("formGroup",n.filterForm),t.xp6(7),t.Q6J("ngForOf",n.salespersonsData),t.xp6(5),t.Q6J("ngForOf",n.salespersonsData),t.xp6(5),t.Q6J("ngForOf",n.rfqStatusData),t.xp6(5),t.Q6J("ngForOf",n.quoteStatusData),t.xp6(5),t.Q6J("ngForOf",n.paymentStatusData),t.xp6(6),t.Q6J("ngForOf",n.searchPayload.salesPersons),t.xp6(3),t.Q6J("ngForOf",n.searchPayload.rfqStatus),t.xp6(3),t.Q6J("ngForOf",n.searchPayload.quoteSubmittedTo),t.xp6(3),t.Q6J("ngForOf",n.searchPayload.quoteStatus),t.xp6(3),t.Q6J("ngForOf",n.searchPayload.paymentStatus),t.xp6(5),t.Q6J("dataSource",n.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===n.requestDetails.length))},dependencies:[p.sg,p.O5,c.JJ,c.JL,c.sg,c.u,C.ey,S.lW,_.qn,_.HS,_.qH,v.Hw,q.KE,q.hX,q.qo,y.Nt,x.gD,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,R.Y,p.uU],styles:[".requestTable[_ngcontent-%COMP%]{width:100%}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;font-size:1rem;background:#f0f0f0}.error[_ngcontent-%COMP%]{color:red;text-align:center}"]}),e})()}];let at=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(nt),d.Bz]}),e})();var it=a(4466);let ut=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,at,it.m]}),e})()}}]);